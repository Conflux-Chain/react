import { Layout, Playground, Attributes } from 'lib/components'
import AlertCircle from '@zeit-ui/react-icons/alertCircle'
import { Input, Spacer, useImperativeInput, Button, Code, Text, Dot } from 'components'
import { useState, useEffect } from 'react'

export const meta = {
  title: 'Input',
  group: 'Data Entry',
}

## Input

Retrieve text input from a user.

<Playground
  desc="Basic input field."
  scope={{ Input, Spacer }}
  code={`
<>
  <Input placeholder="Default Input" />
  <Spacer inline />
  <Input variant="solid" placeholder="Solid Input" />
</>
`}
/>

<Playground
  title="Sizes"
  desc="Inputs of different sizes."
  scope={{ Input, Spacer }}
  code={`
<>
  <Input size="mini" placeholder="Mini Input" />
  <Spacer inline />
  <Input variant="solid" size="mini" placeholder="Solid Mini Input" />
  <Spacer y={.5} />
  <Input size="small" placeholder="Small Input" />
  <Spacer inline />
  <Input variant="solid" size="small" placeholder="Solid Small Input" />
  <Spacer y={.5} />
  <Input size="medium" placeholder="Medium Input" />
  <Spacer inline />
  <Input variant="solid" size="medium" placeholder="Solid Medium Input" />
  <Spacer y={.5} />
  <Input size="large" placeholder="Large Input" />
  <Spacer inline />
  <Input variant="solid" size="large" placeholder="Solid Large Input" />
</>
`}
/>

<Playground
  title="Set width"
  desc="Specify width or other styles."
  scope={{ Input, Spacer }}
  code={`
<>
  <Input placeholder="Input with Width" width="100%" /> <Spacer y={.5} />
  <Input variant="solid" placeholder="Solid Input with Width" width="100%" />
</>
`}
/>

<Playground
  title="Unwritable"
  desc="Disable interactive inputs."
  scope={{ Input, Spacer }}
  code={`
<>
  <Input disabled placeholder="Disabled Input" />
  <Spacer inline />
  <Input variant="solid" disabled placeholder="Solid Disabled Input" />
  <Spacer y={.5} />
  <Input readOnly defaultValue="ReadOnly Input" />
  <Spacer inline />
  <Input variant="solid" readOnly defaultValue="Solid ReadOnly Input" />
</>
`}
/>

<Playground
  title="inline label"
  desc="Show a short label in the line."
  scope={{ Input, Spacer }}
  code={`
<>
  <Input label="username" placeholder="Input with label" />
  <Spacer inline />
  <Input label="username" variant="solid" placeholder="Solid Input with label" />
  <Spacer y={.5} />
  <Input labelRight=".com" placeholder="https://github" />
  <Spacer inline />
  <Input labelRight=".com" variant="solid" placeholder="https://github" />
</>
`}
/>

<Playground
  title="Block label"
  desc="Labels for custom styles."
  scope={{ Input, Spacer, Text, Code, Dot }}
  code={`
<>
  <Input placeholder="Username">
    Username
  </Input>
  <Spacer />
  <Input variant="solid" placeholder="Username">
    Username
  </Input>
  <Spacer />
  <Input placeholder="Post title" width="50%">
    <Text h3>Title</Text>
  </Input>
  <Input variant="solid" placeholder="Post title" width="50%">
    <Text h3>Title</Text>
  </Input>
  <Spacer />
  <Input placeholder="GitHub Actions" width="50%">
    <Dot type="warning">
      <Text small>Problem area for <Code>deployment</Code></Text>
    </Dot>
  </Input>
  <Input variant="solid" placeholder="GitHub Actions" width="50%">
    <Dot type="warning">
      <Text small>Problem area for <Code>deployment</Code></Text>
    </Dot>
  </Input>
</>
`}
/>

<Playground
  title="color"
  desc="Differentiate states by color."
  scope={{ Input, Spacer }}
  code={`
<>
  <Input color="primary" defaultValue="Primary" />
  <Spacer inline />
  <Input variant="solid" color="primary" defaultValue="Solid Primary" />
  <Spacer y={.5} />
  <Input color="error" defaultValue="Error" />
  <Spacer inline />
  <Input variant="solid" color="error" defaultValue="Solid Error" />
</>
`}
/>

<Playground
  title="Icon"
  desc="Specify an icon component."
  scope={{ Input, AlertCircle, Spacer }}
  code={`
<>
  <Input size="mini" icon={<AlertCircle />} placeholder="Info" />
  <Spacer inline />
  <Input variant="solid" size="mini" icon={<AlertCircle />} placeholder="Info" />
  <Spacer y={.5} />
  <Input size="small" icon={<AlertCircle />} placeholder="Info" />
  <Spacer inline />
  <Input variant="solid" size="small" icon={<AlertCircle />} placeholder="Info" />
  <Spacer y={.5} />
  <Input size="medium" icon={<AlertCircle />} placeholder="Info" />
  <Spacer inline />
  <Input variant="solid" size="medium" icon={<AlertCircle />} placeholder="Info" />
  <Spacer y={.5} />
  <Input size="large" icon={<AlertCircle />} placeholder="Info" />
  <Spacer inline />
  <Input variant="solid" size="large" icon={<AlertCircle />} placeholder="Info" />
  <Spacer y={.5} />
  <Input size="mini" iconRight={<AlertCircle />} placeholder="Info" />
  <Spacer inline />
  <Input variant="solid" size="mini" iconRight={<AlertCircle />} placeholder="Info" />
  <Spacer y={.5} />
  <Input size="small" iconRight={<AlertCircle />} placeholder="Info" />
  <Spacer inline />
  <Input variant="solid" size="small" iconRight={<AlertCircle />} placeholder="Info" />
  <Spacer y={.5} />
  <Input size="medium" iconRight={<AlertCircle />} placeholder="Info" />
  <Spacer inline />
  <Input variant="solid" size="medium" iconRight={<AlertCircle />} placeholder="Info" />
  <Spacer y={.5} />
  <Input size="large" iconRight={<AlertCircle />} placeholder="Info" />
  <Spacer inline />
  <Input variant="solid" size="large" iconRight={<AlertCircle />} placeholder="Info" />
  <Spacer y={.5} />
</>
`}
/>

<Playground
  title="Password"
  scope={{ Input, Spacer }}
  code={`
<>
  <Input.Password defaultValue="123456abc" />
  <Spacer inline />
  <Input.Password variant="solid" defaultValue="123456abc" />
</>
`}
/>

<Playground
  title="Clearable"
  desc="Add a clear button in the input box."
  scope={{ Input, Spacer }}
  code={`
<>
  <Input clearable defaultValue="Clear me" placeholder="placeholder" />
  <Spacer inline />
  <Input variant="solid" clearable defaultValue="Clear me" placeholder="placeholder" />
</>
`}
/>

<Playground
  title="Controlled"
  desc="Use Input as a controlled component."
  scope={{ Input, useState }}
  code={`
() => {
  const [value, setValue] = useState('')
  const onChange = (e) => {
    setValue(e.target.value)
    console.log(e.target.value)
  }
  return (
    <Input value={value} onChange={onChange} placeholder="The Evil Rabbit" />
  )
}
`}
/>

<Playground
  title={
    <>
      With <Code>useImperativeInput</Code>
    </>
  }
  desc="Use `hooks` to capture changes."
  scope={{ Input, useImperativeInput, Button, Spacer, useState }}
  code={`
() => {
  const { ref, getValue, setValue, focus, blur } = useImperativeInput()
  const [v, setV] = useState(getValue())
  return (
    <>
      <Input ref={ref} defaultValue="Initial value" />
      <Spacer y={.5} />
      <Button auto type="secondary" size="small"
        onClick={() => setValue(Math.random().toString(32))}>set value</Button>
      <Spacer y={.5} />
      <Button auto size="small" onClick={() => setValue()}>reset value</Button>
      <Spacer y={.5} />
      <Button auto size="small" onClick={() => setV(getValue())}>Get value, the value is: {v}</Button>
    </>
  )
}
`}
/>

<Attributes edit="/pages/en-us/components/input.mdx">
<Attributes.Title>Input.Props</Attributes.Title>

| Attribute         | Description                   | Type                                           | Accepted values                         | Default   |
| ----------------- | ----------------------------- | ---------------------------------------------- | --------------------------------------- | --------- |
| **variant**       | input variant                 | `string`                                       | [InputVariantTypes](#inputvarianttypes) | `line`    |
| **value**         | input value                   | `string`                                       | -                                       | -         |
| **defaultValue**  | initial value                 | `string`                                       | -                                       | -         |
| **placeholder**   | placeholder                   | `string`                                       | -                                       | -         |
| **size**          | input size                    | `NormalSizes`                                  | [InputSizes](#inputsizes)               | `medium`  |
| **color**         | current color                 | `NormalTypes`                                  | [InputColor](#inputcolor)               | `default` |
| **readOnly**      | native attr                   | `boolean`                                      | -                                       | `false`   |
| **disabled**      | disable input                 | `boolean`                                      | -                                       | `false`   |
| **clearable**     | show clear icon               | `boolean`                                      | -                                       | `false`   |
| **label**         | text label for input          | `string`                                       | -                                       | -         |
| **labelRight**    | text label at right for input | `string`                                       | -                                       | -         |
| **icon**          | icon for input                | `React.ReactNode`                              | -                                       | -         |
| **iconRight**     | icon at right for input       | `React.ReactNode`                              | -                                       | -         |
| **iconClickable** | icons are clickable           | `boolean`                                      | -                                       | `false`   |
| **onIconClick**   | click icon event              | `(e: React.ChangeEvent) => void`               | -                                       | -         |
| **onChange**      | change event                  | `(e: React.ChangeEvent) => void`               | -                                       | -         |
| **onClearClick**  | clear icon event              | `(e: React.MouseEvent) => void`                | -                                       | -         |
| **ref**           | forwardRef                    | <Code>Ref<HTMLInputElement &#124; null></Code> | -                                       | -         |
| ...               | native props                  | `InputHTMLAttributes`                          | `'alt', 'type', 'className', ...`       | -         |

<Attributes.Title>Input.Password.Props</Attributes.Title>

| Attribute      | Description      | Type          | Accepted values             | Default |
| -------------- | ---------------- | ------------- | --------------------------- | ------- |
| **hideToggle** | hide toggle icon | `boolean`     | -                           | `false` |
| ...            | input props      | `Input.Props` | [Input.Props](#input.props) | -       |

<Attributes.Title>InputVariantTypes</Attributes.Title>

```ts
type InputVariantTypes = 'solid' | 'line'
```

<Attributes.Title>InputSizes</Attributes.Title>

```ts
type InputSizes = 'mini' | 'small' | 'medium' | 'large'
```

<Attributes.Title>InputColor</Attributes.Title>

```ts
type InputColor = 'default' | 'secondary' | 'success' | 'warning' | 'error'
```

<Attributes.Title>useImperativeInput</Attributes.Title>

```ts
type useImperativeInput = () => {
  state: string
  setState: Dispatch<SetStateAction<string>>
  currentRef: MutableRefObject<string>
  reset: () => void
  bindings: {
    value: string
    onChange: (event: React.ChangeEvent<HTMLInputElement>) => void
  }
}
```

</Attributes>

export default ({ children }) => <Layout meta={meta}>{children}</Layout>

import { Layout, Playground, Attributes } from 'lib/components'
import { Tabs, Spacer, Link, Text, Button, Code, useTabs } from 'components'
import { useState } from 'react'
import TwitterIcon from '@zeit-ui/react-icons/twitter'
import TwitchIcon from '@zeit-ui/react-icons/twitch'
import removeDeps from '../../removeDeps.js'

import dynamicContent from '!!raw-loader!./tabs/dynamicContent.jsx';





export const meta = {
  title: 'tabs',
  group: 'Navigation',
}

## Tabs

Display tab content.

<Playground
  scope={{ Tabs }}
  desc={`Toggle display of different tabs. without caring about the component state. 
  This should be the most common use case
  `}
  code={`
<Tabs initialValue="1">
    <Tabs.Item label="evil rabbit" value="1">The Evil Rabbit Jumped over the Fence.</Tabs.Item>
    <Tabs.Item label="jumped" value="2">The Fence Jumped over The Evil Rabbit.</Tabs.Item>
</Tabs>`}
/>

<Playground
  scope={{ Tabs, Button, Text, Spacer }}
  desc={`Toggle display of different tabs. without caring about the component state. 
  This should be the most common use case
  `}
  code={`
function App(){
  const ref=React.useRef(null)
  const [value,setValue]=React.useState('Not related')
  return <div>
    <Text span>Tab state after click 'See current value': </Text> <Text type='success' span>{value} </Text>
    <Spacer y={1} />
    <Button onClick={()=>setValue(ref.current.currentTab())}>See current value</Button>
    <Button onClick={()=>ref.current.currentTab('2')}>Set value:"2"</Button>
    <Spacer y={1} />
    <Tabs initialValue="1" ref={ref}>
      <Tabs.Item label="evil rabbit" value="1">The Evil Rabbit Jumped over the Fence.</Tabs.Item>
      <Tabs.Item label="jumped" value="2">The Fence Jumped over The Evil Rabbit.</Tabs.Item>
    </Tabs>
  </div>
}
`}
/>

<Playground
  scope={{ Tabs, Text, Spacer }}
  desc={`Toggle display of different tabs. without caring about the component state. 
  This should be the most common use case
  `}
  code={`
function App(){
  const [value,setValue]=React.useState('1')
  return <div>
    <Text span>Current Tab: </Text> <Text type='success' span>{value} </Text>
    <Spacer y={1} />
    <Tabs initialValue={value} onChange={setValue} >
      <Tabs.Item deletable label="evil rabbit" value="1">The Evil Rabbit Jumped over the Fence.</Tabs.Item>
      <Tabs.Item deletable label="jumped" value="2">The Fence Jumped over The Evil Rabbit.</Tabs.Item>
    </Tabs>
  </div>
}
`}
/>

<Playground
  scope={{ Tabs, Text, Spacer, Button }}
  desc={`Toggle display of different tabs. without caring about the component state. 
  This should be the most common use case
  `}
  code={`
function App(){
  const idx=React.useRef(3)
  const [tabs,setTabs]=React.useState([
    {
      label:'evil rabbit',
      value:'1',
      deletable:true,
      content:'The Evil Rabbit Jumped over the Fence.'
    },
    {
      label:'jumped',
      value:'2',
      content:'The Fence Jumped over The Evil Rabbit.'
    }
    ])
  
  return <div>
    <Button onClick={()=>setTabs(tabs=>tabs.concat([{ 
      label:'new staff',
      value:(idx.current++)+'',
      content:'The Fence Jumped over The Evil Rabbit.'
    }]))}>Add Item</Button>
    <Spacer y={1} />
    <Tabs initialValue='1' >
      {tabs.map(
        ({label,content,value,deletable})=><Tabs.Item
        key={value} 
        label={deletable?<div>{label} <span onClick={()=>{
        setTabs(tabs=>tabs.filter(x=>x.value!==value))
        }}>x</span></div>: label} 
      value={value}>{content}
      </Tabs.Item>)}
    </Tabs>
  </div>
}
`}
/>


<Playground
  scope={{ Tabs, Text, Spacer,Button }}
  desc={`Toggle display of different tabs. without caring about the component state. 
  This should be the most common use case
  `}
  code={`${removeDeps(dynamicContent)}`}
/>


export default ({ children }) => <Layout meta={meta}>{children}</Layout>

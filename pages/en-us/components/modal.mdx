import { Layout, Playground, Attributes } from 'lib/components'
import { Modal, Button, Code, Note, Link, Text } from 'components'
import NextLink from 'next/link'
import { useState } from 'react'

export const meta = {
  title: 'modal',
  group: 'Feedback',
}

## Modal

Display popup content that requires attention or provides additional information.

<Note>
  Just want a text notification? Try{' '}
  <NextLink href="/en-us/components/toast">
    <Link>Toast component</Link>
  </NextLink>
  .
</Note>

<Playground
  title="Basic"
  desc="Use `open` control whether `Modal` is displayed."
  scope={{ Modal, Button, useState, Text }}
  code={`
() => {
  const [state, setState] = useState(false)
  const handler = () => setState(true)
  const closeHandler = (event) => {
    setState(false)
    console.log('closed')
  }
  return (
    <div>
      <Button auto onClick={handler}>Show Modal</Button>
      <Modal open={state} onClose={closeHandler}>
        <Modal.Title>Modal</Modal.Title>
        <Modal.Subtitle>This is a modal</Modal.Subtitle>
        <Modal.Content>
          <Text p>Some content contained within the modal.</Text>
        </Modal.Content>
        <Modal.Action onClick={() => setState(false)}>Cancel</Modal.Action>
        <Modal.Action variant="solid">Submit</Modal.Action>
      </Modal>
    </div>
  )
}
`}
/>

<Playground
  title="With closable"
  desc="Use `closable` control whether close button is displayed."
  scope={{ Modal, Button, useState, Text }}
  code={`
() => {
  const [state, setState] = useState(false)
  const handler = () => setState(true)
  const closeHandler = (event) => {
    setState(false)
    console.log('closed')
  }
  return (
    <div>
      <Button auto onClick={handler}>Show Modal</Button>
      <Modal closable open={state} onClose={closeHandler}>
        <Modal.Title>Modal</Modal.Title>
        <Modal.Subtitle>This is a modal</Modal.Subtitle>
        <Modal.Content>
          <Text p>Some content contained within the modal.</Text>
        </Modal.Content>
        <Modal.Action onClick={() => setState(false)}>Cancel</Modal.Action>
        <Modal.Action variant="solid">Submit</Modal.Action>
      </Modal>
    </div>
  )
}
`}
/>

<Playground
  title="With disableBackdropClick"
  desc="Use `disableBackdropClick` control whether close when clickaway"
  scope={{ Modal, Button, useState, Text }}
  code={`
() => {
  const [state, setState] = useState(false)
  const handler = () => setState(true)
  const closeHandler = (event) => {
    setState(false)
    console.log('closed')
  }
  return (
    <div>
      <Button auto onClick={handler}>Show Modal</Button>
      <Modal disableBackdropClick open={state} onClose={closeHandler}>
        <Modal.Title>Modal</Modal.Title>
        <Modal.Subtitle>This is a modal</Modal.Subtitle>
        <Modal.Content>
          <Text p>Some content contained within the modal.</Text>
        </Modal.Content>
        <Modal.Action onClick={() => setState(false)}>Cancel</Modal.Action>
        <Modal.Action variant="solid">Submit</Modal.Action>
      </Modal>
    </div>
  )
}
`}
/>

<Playground
  title={
    <>
      With <Code>useModalHandle</Code>
    </>
  }
  desc="Use `hooks` for easier control `Modal`."
  scope={{ Modal, Button, Text }}
  code={`
() => {
  const { setVisible, ref } = Modal.useModalHandle()
  return (
    <>
      <Button auto onClick={() => setVisible(true)}>Show Modal</Button>
      <Modal ref={ref}>
        <Modal.Title>Modal</Modal.Title>
        <Modal.Subtitle>This is a modal</Modal.Subtitle>
        <Modal.Content>
          <Text p>Some content contained within the modal.</Text>
        </Modal.Content>
        <Modal.Action onClick={() => setVisible(false)}>Cancel</Modal.Action>
        <Modal.Action variant="solid">Submit</Modal.Action>
      </Modal>
    </>
  )
}
`}
/>

<Playground
  title="Without Actions"
  desc="Hide all action buttons."
  scope={{ Modal, Button, useState, Text }}
  code={`
() => {
  const [state, setState] = useState(false)
  const handler = () => setState(true)
  const closeHandler = (event) => {
    setState(false)
    console.log('closed')
  }
  return (
    <div>
      <Button auto onClick={handler}>Show Modal</Button>
      <Modal closable open={state} onClose={closeHandler}>
        <Modal.Title>Modal</Modal.Title>
        <Modal.Subtitle>This is a modal</Modal.Subtitle>
        <Modal.Content>
          <Text p>Some content contained within the modal.</Text>
        </Modal.Content>
      </Modal>
    </div>
  )
}
`}
/>

<Playground
  title="Disable Action"
  desc="Disable one of the buttons."
  scope={{ Modal, Button, useState, Text }}
  code={`
() => {
  const [state, setState] = useState(false)
  const handler = () => setState(true)
  const closeHandler = (event) => {
    setState(false)
    console.log('closed')
  }
  return (
    <>
      <Button auto onClick={handler}>Show Modal</Button>
      <Modal open={state} onClose={closeHandler}>
        <Modal.Title>Modal</Modal.Title>
        <Modal.Subtitle>This is a modal</Modal.Subtitle>
        <Modal.Content>
          <Text p>Some content contained within the modal.</Text>
        </Modal.Content>
        <Modal.Action onClick={() => setState(false)}>Cancel</Modal.Action>
        <Modal.Action disabled>Submit</Modal.Action>
      </Modal>
    </>
  )
}
`}
/>

<Playground
  title="Customizable"
  desc="Custom `width` or `className`."
  scope={{ Modal, Button, Text }}
  code={`
() => {
  const { setVisible, ref } = Modal.useModalHandle()
  return (
    <div>
      <Button auto onClick={() => setVisible(true)}>Show Modal</Button>
      <Modal closable ref={ref} width="35rem">
        <Modal.Title>My Favorites</Modal.Title>
        <Modal.Content>
          <Text p>This is the width I want.</Text>
        </Modal.Content>
      </Modal>
    </div>
  )
}
`}
/>

<Attributes edit="/pages/en-us/components/modal.mdx">
<Attributes.Title>Modal.Props</Attributes.Title>

| Attribute                | Description                      | Type             | Accepted values                         | Default |
| ------------------------ | -------------------------------- | ---------------- | --------------------------------------- | ------- |
| **open**                 | open or close                    | `boolean`        | -                                       | `false` |
| **closable**             | whether display close (x) button | `boolean`        | -                                       | `false` |
| **onOpen**               | open event                       | `() => void`     | -                                       | -       |
| **onClose**              | open event                       | `() => void`     | -                                       | -       |
| **width**                | width of the modal dialog        | `string`         | -                                       | `30rem` |
| **wrapClassName**        | className of the modal dialog    | `string`         | -                                       | -       |
| **disableBackdropClick** | click background and don't close | `boolean`        | -                                       | `false` |
| ...                      | native props                     | `HTMLAttributes` | `'autoFocus', 'name', 'className', ...` | -       |

<Attributes.Title>Modal.Title.Props</Attributes.Title>

| Attribute | Description  | Type             | Accepted values          | Default |
| --------- | ------------ | ---------------- | ------------------------ | ------- |
| ...       | native props | `HTMLAttributes` | `'id', 'className', ...` | -       |

<Attributes.Title>Modal.Subtitle.Props</Attributes.Title>

| Attribute | Description  | Type             | Accepted values          | Default |
| --------- | ------------ | ---------------- | ------------------------ | ------- |
| ...       | native props | `HTMLAttributes` | `'id', 'className', ...` | -       |

<Attributes.Title>Modal.Content.Props</Attributes.Title>

| Attribute | Description  | Type             | Accepted values          | Default |
| --------- | ------------ | ---------------- | ------------------------ | ------- |
| ...       | native props | `HTMLAttributes` | `'id', 'className', ...` | -       |

<Attributes.Title>Modal.Actions.Props</Attributes.Title>

| Attribute | Description | Type | Accepted values | Default |
| --------- | ----------- | ---- | --------------- | ------- |
| -         | -           | -    | -               | -       |

<Attributes.Title>Modal.Action.Props</Attributes.Title>

<Note>
  Just see{' '}
  <NextLink href="/en-us/components/button">
    <Link>Button component</Link>
  </NextLink>
  .
</Note>

<Attributes.Title>useModalHandle</Attributes.Title>

```ts
type useModalHandle = () => {
  ref: RefObject
  setVisible: (visible?: boolean) => void
  getVisible: () => boolean
}
```

<Attributes.Title>ModalActionEvent</Attributes.Title>

```ts
type ModalActionEvent = MouseEvent<HTMLButtonElement> & {
  close: () => void
}
```

</Attributes>

export default ({ children }) => <Layout meta={meta}>{children}</Layout>

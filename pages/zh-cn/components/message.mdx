import { Layout, Playground, Attributes } from 'lib/components'
import { useMessages, Button, Spacer } from 'components'

export const meta = {
  title: '全局提示 Message',
  group: '反馈',
}

## Message / 全局提示

显示重要的全局通知信息

<Playground
  desc="基础示例"
  scope={{ Button, useMessages }}
  code={`
    () => {
      const [messages, setMessage] = useMessages()
      const click = () => setMessage({ 
        text: '你正在浏览文档站点',
      })
      return <Button onClick={click}>显示通知</Button>
    }
  `}
/>

<Playground
  title="类型"
  scope={{ Button, useMessages, Spacer }}
  code={`
() => {
  const [, setMessage] = useMessages()
  const click = color => setMessage({
    text: '我正在浏览文档站点',
    color,
  })
  return (
    <>
    <Button onClick={() => click('primary')} variant="solid" color="primary">显示主要状态</Button>
    <Spacer y={.5} />
    <Button onClick={() => click('success')} variant="solid" color="success">显示成功状态</Button>
    <Spacer y={.5} />
    <Button onClick={() => click('warning')} variant="solid" color="warning">显示警告状态</Button>
    <Spacer y={.5} />
    <Button onClick={() => click('error')} variant="solid" color="error">显示错误状态</Button>
    </>
  )
}
`}
/>

<Playground
  title="多行"
  desc="显示多行或过长的文本"
  scope={{ Button, useMessages }}
  code={`
() => {
  const [messages, setMessage] = useMessages()
  const click = () => setMessage({ 
    text: 'CSS是一门基于规则的语言 —— 你能定义用于你的网页中特定元素样式的一组规则. 比如“我希望页面中的主标题是红色的大字”',
    delay: 30000
  })
  return <Button onClick={click}>显示通知</Button>
}
`}
/>

<Playground
  title="取消"
  desc="使用 `passive` (消极地) 改变按钮的状态与样式"
  scope={{ Button, useMessages }}
  code={`
() => {
  const [, setMessage] = useMessages()
  const action = {
    name: '取消',
    passive: true,
    handler: (event, cancel) => cancel()
  }
  const click = () => setMessage({
    text: '我正在浏览文档站点',
    actions: [action],
  })
  return <Button onClick={click}>显示通知</Button>
}
`}
/>

<Attributes edit="/pages/zh-cn/components/message.mdx">
<Attributes.Title>useMessages</Attributes.Title>

```ts
const [messages: Array<Message>, setMessage: (message: Message) => void] = useMessages()
```

<Attributes.Title>Message</Attributes.Title>

```ts
interface Message {
  text?: string
  type?: NormalTypes
  delay?: number
  actions?: Array<MessageAction>
}
```

<Attributes.Title>MessageAction</Attributes.Title>

```ts
interface MessageAction {
  name: string
  handler: (event: React.MouseEventHandler<HTMLButtonElement>, cancel: Function) => void
  passive?: boolean
}
```

</Attributes>

export default ({ children }) => <Layout meta={meta}>{children}</Layout>
